name: Keep Render App Alive

on:
  schedule:
    # Executa a cada 14 minutos (antes do Render hibernar em 15min)
    - cron: '*/14 * * * *'
  
  # Permite executar manualmente se necessÃ¡rio
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    
    steps:
    - name: Ping the website
      run: |
        echo "ğŸ”„ Fazendo ping no site para manter ativo..."
        response=$(curl -s -o /dev/null -w "%{http_code}" https://lista-produtos.onrender.com)
        echo "ğŸ“Š Status Code: $response"
        
        if [ $response -eq 200 ]; then
          echo "âœ… Site estÃ¡ online!"
        else
          echo "âš ï¸ Site retornou cÃ³digo: $response"
        fi
        
        echo "â° PrÃ³ximo ping em 14 minutos..."